월드 인스턴스 개념과 생성, 파괴에 관해 알아보자 
월드 인스턴스를 이해하기 위해 [인스턴스 맵 만들기](https://maplestoryworlds-creators.nexon.com/docs/?postId=540)의 룸 관련 내용을 먼저 학습하면 도움이 됨
# 월드 인스턴스
월드 인스턴스란 크리에이터가 메이커에서 제작한 월드의 정보를 기반으로 생성한 실제 객체임 
월드 인스턴스는 독립적으로 실행되며, 크리에이터의 제작 방식에 따라 정적 룸과 인스턴스룸이 구성됨
> **TIP.**  
> 제작한 월드의 모든 월드 인스턴스는 하나의 DataStorage를 사용함
![[Pasted image 20250819215018.png]]
#### 월드 인스턴스끼리 통신
월드 인스턴스는 저마다 개별적으로 실행되고 있으므로 월드 인스턴스끼리의 통신이 필요하거나 이벤트 전달이 필요하다면 [RoomService](https://maplestoryworlds-creators.nexon.com/apiReference/Services/RoomService)와 [WorldInstanceService](https://maplestoryworlds-creators.nexon.com/apiReference/Services/WorldInstanceService)를 활용해야 함
자세한 활용 방법은 [월드 인스턴스 통신](https://maplestoryworlds-creators.nexon.com/docs?postId=999)을 참고 ㄱㄱ
# 월드 인스턴스의 생성과 파괴
월드 출시 단계에서 크리에이터는 월드의 **최대 플레이어 수**를 설정함 
이 인원수가 새로운 월드 인스턴스를 생성하는 기준 중 하나임 
예를 들어 최대 플레이어 수를 10명으로 설정한 월드에 100명의 유저가 접속했다면, 월드 인스턴스가 10개 생성됨  
월드 인스턴스 파괴 기준은 **유저의 이탈**임 
모든 유저가 월드 플레이를 종료해 남아있는 유저가 없다면 월드 인스턴스는 자동으로 파괴됨  
월드 인스턴스는 생성된 후 일정 시간이 지나면 **은퇴 준비**를 함 
은퇴 준비란 새로운 유저의 접속을 허용하지 않는 것임 
월드 인스턴스는 기존에 접속해 있던 유저들만으로 월드 인스턴스를 운영하며 모든 유저가 떠나면서 자연스럽게 월드 인스턴스가 파괴되기를 기다림
![[Pasted image 20250819215126.png]]
#### 월드 인스턴스의 유저 할당
유저를 어떤 월드 인스턴스로 보낼지의 기준은 **월드 인스턴스의 인원수**임 
생성된 월드 인스턴스가 없을 때 새로운 월드 인스턴스를 하나 생성해 총원이 찰 때까지 해당 월드 인스턴스로 보냄
이 월드 인스턴스에 정원이 모두 차면, 또 다른 새로운 월드 인스턴스를 생성해 유저를 보냄 
만약 여러 개의 월드 인스턴스를 운영 중인 상황에서 유저들이 월드를 떠나면 빈자리가 발생함 
그러면 새로운 유저가 접속했을 때 더 이상 새로운 월드 인스턴스를 생성하지 않음 
대신 빈자리가 있는 월드 인스턴스 중 유저가 가장 많은 곳으로 새로운 유저를 보냄
이때 은퇴 준비를 시작한 월드 인스턴스는 유저 수가 가장 많더라도 대상에 포함되지 않음
![[Pasted image 20250819215952.png]]
