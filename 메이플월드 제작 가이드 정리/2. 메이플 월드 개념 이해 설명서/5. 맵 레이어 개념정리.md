맵 레이어를 사용해 더욱 입체적으로 게임 화면을 디자인할 수 있음  
맵 레이어 창 구성을 살펴보고 활용하는 방법을 알아보자  
레이어 순서를 이해하고 레이어를 크리에이터의 게임에 맞게 활용할 수 있음
# 맵 레이어 위치
맵 레이어 창은 기본 패널 설정 기준, 중앙 하단에 위치함  
작업 편의를 위해 탭을 닫은 후 다시 불러올 때는 **Panels - Map Layer**을 선택해 불러올 수 있음
메이커 화면 기본 위치
![[Pasted image 20250818170526.png]]

Panels - Map Layer
![[Pasted image 20250818170535.png]]
**Tip**  
**Panels - Reset Panels**를 선택해 패널 상태를 초기화 할 수 있음
![[Pasted image 20250818170546.png]]

# 맵 레이어 창 구성
![[Pasted image 20250818170558.png]]
![[Pasted image 20250818170604.jpg]] - ![[Pasted image 20250818170608.png]] - 선택한 단일 레이어만 확인할 수 있음
- None: 모든 레이어가 활성화된 상태
- Focus: 선택한 레이어 하나만 활성화된 상태 , 다른 레이어는 반투명하고 어둡게 보여 활성 상태가 다름을 알 수 있음 ,  비활성 된 레이어는 씬에서 선택할 수 없음
![[Pasted image 20250818170637.jpg]] - ![[Pasted image 20250818170641.png]] - 비활성화하면 해당 레이어에 배치된 엔티티가 숨겨지며 보이지 않음  , 제작 중에만 보이지 않으며 테스트 실행, 게임 출시 시 비활성화 된 레이어가 모두 활성화됨
![[Pasted image 20250818170701.jpg]] - Layer - 총 10개의 Layer를 만들 수 있음
![[Pasted image 20250818170711.jpg]] - ![[Pasted image 20250818170714.png]] - 선택한 레이어를 잠금 ,  잠겨진 레이어에 속한 모든 엔티티를 선택하거나, 변경할 수 없음
![[Pasted image 20250818170728.jpg]] - ![[Pasted image 20250818170731.png]] - 빈 레이어를 추가할 수 있음 ,  레이어를 추가하면 직전에 만든 엔티티 바로 위로 LayerN(숫자) 이름으로 새롭게 생성됨
![[Pasted image 20250818170746.jpg]] - ![[Pasted image 20250818170749.png]] - 레이어를 삭제함 ,  복구가 불가능하므로 신중하게 삭제하길 바람

# 맵 레이어 이해하기
레이어란 맵 화면 위에 올리는 투명한 판과 같음  
판 위에 여러 엔티티를 올리고, 또 다른 투명한 판을 올리면 새로운 엔티티를 배치할 수 있음  
레이어 창 가장 아래에 깔린 레이어가 맵 화면에서 가장 뒤에 위치하게 되고, 맨 위에 있는 레이어가 가장 앞에 배치됨  
레이어에 배치된 엔티티들은 레이어 순서에 일괄적으로 영향을 받음 
가장 아래 있던 레이어를 위로 올리는 순간, 엔티티의 순서가 함께 변경됨
![[Pasted image 20250818170834.png]]
![[Pasted image 20250818170839.png]]
#### 레이어 우선순위 적용 규칙
메이커에서 엔티티 순서는 아래 순서에 따라 결정됨
1. **Map Layer** (SpriteRendererComponent의 SortingLayer)
2. **SpriteRendererComponent의 OrderInLayer 프로퍼티**
3. **TransformComponent의 Position Z값**  
    [엔티티의 위치, 크기, 회전 조정](https://maplestoryworlds-creators.nexon.com/ko/docs/docs?postId=82)을 참고 
#### 모델의 레이어 순서
모델은 배치 편의를 위해 유형 별로 **OrderInLayer** 기본값이 정해져 있음
![[Pasted image 20250818170937.png]]
**모델 유형별 OrderInLayer 기본값**
OrderInLayer 값 - 0 , 오브젝트 - 1 , 타일 - 2 , 몬스터, NPC, 발판, 사다리, 로프, 포탈, 트랩, 아이템 - 3 , 타 이용자의 아바타 - 4 , 나의 아바타
분류된 값을 임의로 변경해 배치 순서를 바꿀 수 있으나, "3 이상의 값"을 입력하는 것은 지양함  
월드를 플레이할 때 아바타가 가려질 수 있기 때문임
> **더 알아보기**  
> 단일 레이어에서 같은 분류의 엔티티를 여러 개 배치하면, 마지막에 배치한 엔티티가 앞에 옴

# 맵 레이어와 플레이어 아바타 관계
플레이어 아바타는 엔티티이지만, 다른 엔티티와 몇 가지 차이가 있음
- 플레이어 아바타는 편집 상태에서 맵에 배치할 수 없고, 특정 레이어에 귀속되지 않음
- 다른 엔티티는 움직임과 관계 없이 처음 배치된 맵 레이어에만 속함 ,  하지만 플레이어 아바타는 현재 밟고 있는 엔티티(타일, 발판 등)의 맵 레이어로 소속이 계속 바뀜  
    두 개의 활용 예시를 보며 맵 레이어와 플레이어 아바타의 관계를 살펴보시길 바람
#### 활용 예시 1
초록 타일은 Layer1에, 연두 타일은 Layer2에 배치함  
초록 타일을 밟고 있는 플레이어 아바타는 점프할 때까지는 Layer1에 머물러 있지만, 노란 타일에 착지하는 순간 Layer2에 있는 상태가 됨
![[16346025247675038e0d2fd854f5e80a5359fe45d2df8.gif]]

#### 활용 예시 2
4개의 레이어에 각각 타일과 오브젝트를 배치함(OrderInLayer는 기본값입니다.)  
플레이어 아바타는 밟고 있는 엔티티 레이어가 귀속 기준이므로 가장 아래 있는 layer1에서 움직이기 시작함 
초록 타일 위 나무 오브젝트들은 Layer4에 배치되어 있음 
그러므로 초록 타일을 밟으며 이동하는 아바타는 나무 오브젝트 뒤로 이동함
플레이어 아바타가 연두 타일로 이동하면, 플레이어 아바타는 Layer3에 속함 
연두 타일 위의 장난감 오브젝트들은 Layer2에 배치되어 있음 
연두 타일이 Layer2보다 위에 있는 레이어에 속해있기 때문에 아바타는 장난감 오브젝트 앞으로 지나감
레이어 특성과 오브젝트를 적절히 이용해 불구덩이를 뚫고 가거나, 수풀을 헤쳐나가는 듯한 연출을 만들 수 있음
![[1634602745986d158da5858dc44be9481dbd8b21ef50e.gif]]
![[Pasted image 20250818171238.png]]

# 마무리
맵 레이어를 활용하면 엔티티를 특징 별로 묶어 관리할 수 있음 
이는 커다랗고 복잡한 맵을 만들수록 힘을 발휘함 
처음 월드를 제작한다면, 첫 기획과 다른 방향으로 흘러갈 수 있으니 처음부터 레이어 활용 규칙을 익혀 변동에 유연하게 대처하며 게임을 제작ㄱㄱㄱ