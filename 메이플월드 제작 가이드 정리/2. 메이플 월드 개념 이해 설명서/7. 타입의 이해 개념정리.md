타입(Type)의 개념과 활용 방법을 소개함

# 타입이란?
![[Pasted image 20250819164328.png]]
메이플스토리 월드에서 **타입**이란 여러 가지 프로퍼티 및 함수를 조합하여 하나의 새로운 데이터 유형을 만드는 사용자 정의 자료형을 말함
타입을 활용하면 유사한 성격의 데이터를 한 번에 묶어서 제어하고 관리할 수 있어 코드를 재사용하기 좋음 
또한 코드를 유지 보수할 때 유용함
## 타입과 컴포넌트의 차이
타입은 컴포넌트와 비슷하지만 다음과 같은 차이점이 있음
- 타입은 컴포넌트가 아니므로 엔티티에 추가할 수 없음
- 타입은 실행 제어 기능을 지원하지 않음
- 타입에는 이벤트 핸들러가 없음
- 각 타입의 용도에 맞는 **기본 이벤트 함수**가 제공되기도 함
# 타입의 특징과 종류
각 타입은 사용처가 정해져 있음
그리고 사용처에 맞는 Native 기능과 연동되어 있음 
또한 각 타입의 용도에 맞는 **기본 이벤트 함수**가 제공되는 타입도 있음 
기본 이벤트 함수가 어떻게 작동할지는 Native에서 이미 정의되어 있음 
그러므로 크리에이터는 이러한 기본 이벤트 함수를 가져다가 본인의 월드에 맞게 필요한 부분만 구현하면 됨
이제 타입의 종류와 특징, 그리고 활용법을 알아보자 ㄱㄱ
## EventType
Native에서 정의되지 않은, 새로운 **EventType**을 정의할 때 사용함 
**EventType**은 **Event System**과 연동됨  
**EventType**의 자세한 활용 예시는 [Entity Event System](https://maplestoryworlds-creators.nexon.com/docs/?postId=176) 가이드를 참고ㄱㄱ
## ItemType
**ItemType**은 말 그대로 아이템을 분류하고, 분류된 아이템의 성격을 정의할 때 사용함 
**ItemType**은 [ItemService](https://maplestoryworlds-creators.nexon.com/apiReference/Services/ItemService)와 연동됨  
**ItemType**은 개별 아이템 단위로 생성할 수도 있지만 일반적으로는 기능이 동일한 유형 별로 묶어서 생성하는 것이 좋음
예를 들어, 크리에이터가 만드는 월드에는 여러 아이템이 존재할 것임 
이 아이템의 종류를 크게 아래와 같이 나눌 수 있다고 가정 ㄱㄱ
- 무기 : 공격력을 가짐
- 포션 : 회복력을 가짐
- 방어구 : 방어력을 가짐
- 기타 : 특별한 기능 없음
이런 경우에는 아래와 같이 **ItemType**을 만들 수 있음
![[Pasted image 20250819164550.png]]
**ItemType** 스크립트에서는 기본 이벤트 함수인 `OnCreate()`를 사용할 수 있음  
`OnCreate()`는 아이템이 생성될 때 자동으로 호출되며 아이템 테이블(UserItemDataSet)의 데이터가 아이템 객체로 넘어옴
아이템 객체로 넘어온 데이터는 `self.ItemTableData:GetItem("컬럼명")` 형식으로 접근할 수 있음
![[Pasted image 20250819164611.png]]
**ItemType**의 자세한 활용 예시는 [아이템 생성 및 삭제](https://maplestoryworlds-creators.nexon.com/docs/?postId=66) 가이드를 참고 ㄱㄱ
## BTNodeType
몬스터나 NPC 같은 엔티티에 AI를 적용할 때는 [AIComponent](https://maplestoryworlds-creators.nexon.com/apiReference/Components/AIComponent)를 활용ㄱㄱ 
**AIComponent**로 행동 트리(Behaviour Tree)를 만들 수 있음 
이 행동 트리를 구성하는 노드 중 하나인 **Action 노드**를 생성할 때 **BTNodeType** 스크립트를 사용함
**Action 노드**는 "엔티티의 행동" 또는 "행동에 대한 조건"을 정의함 
예를 들어, 몬스터가 "대기" 상태에 있을 때 어떤 행동을 할지를 정의하거나, "대기" 상태에서 "공격" 상태로 변환되는 조건을 정의함 
**BTNodeType**으로 Action 노드를 만들어 두면 **AIComponent**의 `CreateNode()`로 손쉽게 노드 객체를 생성할 수 있음
**BTNodeType** 스크립트에서는 기본 이벤트 함수인 `OnBehave()`, `OnInit()`를 사용할 수 있음
OnBehave(number delta) - 해당 Action 노드가 실행될 때마다 1회씩 호출되는 함수임 ,  AI의 행동이나 행동의 조건을 정의할 때 사용하는 함수이기 때문에 **BTNodeType**을 만들었다면 반드시 추가해야 함
OnInit() - `OnBehave()`가 호출되기 전에 실행되는 함수임
![[Pasted image 20250819165214.png]]
각 함수에 대한 보다 자세한 설명 및 **BTNodeType** 활용 예시는 [행동 트리를 활용한 AI 만들기](https://maplestoryworlds-creators.nexon.com/docs/?postId=562) 가이드를 참고ㄱㄱ
## StateType
**StateType**은 사용자가 새로운 상태를 만들 때 사용함  
예를 들어 플레이어 캐릭터는 서 있는 상태, 엎드린 상태, 공격 상태, 점프하는 상태 등 여러 가지 상태를 갖고 있음
이렇게 기본적으로 갖고 있는 상태 이외에 크리에이터가 추가하고 싶은 새로운 상태가 있을 때 **StateType**을 추가하면 됨
**StateType**은 [StateComponent](https://maplestoryworlds-creators.nexon.com/apiReference/Components/StateComponent)와 연동됨
**StateType**에서는 다음의 내용을 정의할 수 있음
- 어떤 상태에 진입하거나 상태에서 퇴장할 때 사용자가 정의한 행동을 수행하게 할 수 있음
- 상태가 종료되는 조건을 정의할 수 있음
**StateType** 스크립트에서는 기본 이벤트 함수인 `OnEnter()`, `OnUpdate()`, `OnExit()`, `OnConditionCheck()`를 사용할 수 있음
OnEnter() - 상태에 처음 진입할 때의 동작을 실행함
OnUpdate() - 상태가 유지되는 동안의 동작을 실행함
OnExit() - 상태가 변경될 때 실행됨
OnConditionCheck(string nextStateName) - 상태 전이 조건을 지정함 , **nextStateName** 파라미터를 사용해 연결된 상태에 따라 다른 결괏값을 반환할 수 있음
![[Pasted image 20250819165351.png]]
**StateType**에 대한 보다 자세한 설명은 [엔티티의 상태 제어하기](https://maplestoryworlds-creators.nexon.com/docs/?postId=686) 가이드를 참고ㄱㄱ
## StructType
**StructType**은 크리에이터가 직접 사용처를 정하고 그에 맞게 형태를 정의할 때 사용함  
일반적인 프로그래밍 언어의 Structure와 비슷한 기능을 한다고 이해할 수 있음 
다른 데이터를 담는 변수들을 묶어서 사용할 때 유용함 
예를 들어 "Student"라는 Type을 만들고 그 안에 "이름, 학번, 학과" 등의 변수들을 넣어 관리할 수 있음